extends ../layouts/main

mixin relatedPost(post, className, titlePrepend)
    if post
        article(class=`related-post ${className}`)
            a(href=post.path)
                +picture(post.mainImage, {className: 'related-post-image'})
                h2.related-post-heading=`${titlePrepend}: ${post.town}`


block meta
    title=`${post.town} | Daniel Levett`

block content
    article
        header.site-header
            h1.site-heading=post.town
                span.site-subheading=`${post.country} | ${post.humanDate}`

        each image, i in post.images
            +imageLink(image)
                +picture(image, {
                	className: 'blog-image' + (i === post.images.length - 1 ? ' last' : ''),
                    lazyLoad: i !== 0
                })

        if previousPost || nextPost
            aside.related-posts-wrapper
                h2.section-heading Other places
                div.related-posts-wrapper-inner
                    +relatedPost(previousPost, 'previous-post', 'Previous')
                    +relatedPost(nextPost, 'next-post', 'Next')
