extends ../layouts/main

mixin relatedPost(post, className, linkClassName, titlePrepend)
    if post
        article(class=`related-post ${className}`)
            a(href=post.path class=linkClassName)
                +picture(post.mainImage, {className: 'related-post-image'})
                h3.related-post-heading
                    span.related-post-heading-label=`${titlePrepend}:`
                    span.related-post-heading-title=post.town


block meta
    title=`${post.town} | Daniel Levett`

block content
    article
        header.site-header
            h1.site-heading=post.town
                span.site-subheading=`${post.country} | ${post.humanDate}`

        each image, i in post.images
            +imageLink(image)
                figure
                    +picture(image, {
                        className: 'blog-image' + (i === post.images.length - 1 ? ' last' : ''),
                        lazyLoad: i > 1
                    })
                    if image.caption
                        figcaption.hidden=image.caption

        if previousPost || nextPost
            aside.related-posts-wrapper
                h2.section-heading Other places
                div.related-posts-wrapper-inner
                    +relatedPost(previousPost, 'previous-post', 'js-previous-post-link', 'Previous')
                    +relatedPost(nextPost, 'next-post', 'js-next-post-link', 'Next')
